import{o as l,c as n,a as t,F as p,d,_,e as m,j as g,t as y,h as c,k as r,r as f,l as S,g as b,n as v,m as w}from"./index-538ec71d.js";const C=t("h6",null,"File Upload",-1),I=t("h6",null,"Preview:",-1),$={class:"row"},D=["src"],L={key:1,class:"text-success"};function V(i,e,a,o,s,h){return l(),n(p,null,[C,t("input",{class:"form-control",type:"file",id:"fileUpload",onChange:e[0]||(e[0]=u=>h.fileUpload(u)),accept:"image/*"},null,32),s.previewImage&&!s.showSuccess?(l(),n(p,{key:0},[I,t("button",{class:"btn btn-success",onClick:e[1]||(e[1]=u=>h.uploadImage())},"Save Image"),t("div",$,[t("img",{src:s.previewImage,style:{width:"20%"}},null,8,D)])],64)):d("",!0),s.showSuccess?(l(),n("p",L,"Your Image uploaded successfully.")):d("",!0)],64)}const k={props:{activityId:Number,loadActivity:Function},data(){return{files:[],uploadFile:null,previewImage:null,showSuccess:!1}},methods:{uploadImage(){let i=new FormData;i.append("activityId",this.activityId),i.append("file",this.uploadFile);let e={header:{"Content-Type":"multipart/form-data"}};m.post(window.location.origin+"/api/activity/label-file",i,e).then(a=>{this.showSuccess=!0,this.loadActivity()}).catch(a=>console.log(a))},fileUpload(i){const e=i.target.files[0];this.uploadFile=i.target.files[0];const a=new FileReader;a.readAsDataURL(e),a.onload=o=>{this.previewImage=o.target.result}},saveFile(){},loadFiles(){m.post(window.location.origin+"/api/activity",{activityId:this.activityId}).then(i=>{this.files=i.data}).catch(i=>console.log(i))}},mounted(){}},T=_(k,[["render",V]]),F={key:0,ref:"draggableContainer",id:"draggable-container",name:"draggableContainer"};function N(i,e,a,o,s,h){return this.Shape!==""?(l(),n("div",F,[t("div",{class:"border border-dark d-flex align-items-center",id:"draggable-icon",onMousedown:e[0]||(e[0]=(...u)=>h.dragMouseDown&&h.dragMouseDown(...u)),style:g(h.getStyle())},[t("p",{style:g({color:a.TextColor,margin:"auto"})},y(this.Text),5)],36)],512)):d("",!0)}const A={name:"DraggableContainer",props:{Shape:String,Color:String,TextColor:String,Text:String,Width:Number,Height:Number,LabelX:Number,LabelY:Number},data(){return{positions:{clientX:void 0,clientY:void 0,movementX:0,movementY:0}}},mounted(){this.loadLocation()},methods:{loadLocation(){console.log(this.Shape),this.Shape!==""&&(console.log(this.LabelX),console.log(this.LabelY),this.$refs.draggableContainer.style.left=this.LabelX-this.Width/2+"px",this.$refs.draggableContainer.style.top=this.LabelY-this.Width/2+"px")},getStyle(){return this.Shape==="Circle"?{margin:"0px",width:this.Width+"px",height:this.Width+"px","border-radius":"50%","font-size":"14px","line-height":this.Width+"px","text-align":"center",background:this.Color,color:this.TextColor}:{width:this.Width+"px",height:this.Height+"px","text-align":"center",background:this.Color,color:this.TextColor}},dragMouseDown:function(i){i.preventDefault(),this.positions.clientX=i.clientX,this.positions.clientY=i.clientY,document.onmousemove=this.elementDrag,document.onmouseup=this.closeDragElement},elementDrag:function(i){i.preventDefault(),this.positions.movementX=this.positions.clientX-i.clientX,this.positions.movementY=this.positions.clientY-i.clientY,this.positions.clientX=i.clientX,this.positions.clientY=i.clientY,this.X=i.clientX,this.Y=i.clientY,this.$refs.draggableContainer.style.top=this.$refs.draggableContainer.offsetTop-this.positions.movementY+"px",this.$refs.draggableContainer.style.left=this.$refs.draggableContainer.offsetLeft-this.positions.movementX+"px"},closeDragElement(i){this.$emit("changeCoordinates",i),document.onmouseup=null,document.onmousemove=null}}},U=_(A,[["render",N]]);const x={class:"row"},Y={class:"col-md-4 col-sm-12"},O={class:"form"},W={class:"row form-row"},X=t("label",{class:"form-label ps-0"},"Image Size:",-1),z=["disabled"],P={class:"row form-row pt-2"},M={class:"row form-row pt-3"},H=t("h6",{class:"ps-0"},"Labels:",-1),E={class:"row form-row pt-2"},B={key:0,class:"row form-row pt-2"},R={class:"scroll ps-0 pe-0","data-bs-spy":"scroll","data-bs-root-margin":"0px 0px -40%","data-bs-smooth-scroll":"true",tabindex:"0"},q={class:"row ms-1 me-1 pb-2"},j={class:"card p-0"},Q={class:"card-header ms-0 me-0"},G=["onUpdate:modelValue"],J={class:"card-body pt-2"},K={class:"row form-row p-1 pt-0"},Z=t("label",{class:"form-label ps-0"},"Shape:",-1),tt=["onUpdate:modelValue"],et=t("option",{value:""},"Please Select a Type",-1),it=t("option",{value:"Rectangle"},"Rectangle",-1),at=t("option",{value:"Circle"},"Circle",-1),ot=[et,it,at],st={key:0,class:"row form-row p-1"},lt={class:"col-md-6 p-0"},nt=t("label",{class:"form-label ps-0"},"Width:",-1),dt=["onUpdate:modelValue"],ct={key:0,class:"col-md-6"},rt=t("label",{class:"form-label ps-0"},"Height:",-1),ht=["onUpdate:modelValue"],pt={class:"row form-row p-1 d-flex align-items-center"},mt=t("div",{class:"col-md-2 p-0 align-middle"},[t("label",{class:"form-label ps-0 pb-0"},"Color:")],-1),ut={class:"col-md-3 p-0"},vt=["onUpdate:modelValue"],gt=t("div",{class:"col-md-3 p-0"},[t("label",{class:"form-label ps-0 pb-0"},"TextColor:")],-1),bt={class:"col-md-3 p-0"},yt=["onUpdate:modelValue"],ft={class:"row form-row p-1"},_t=t("label",{class:"form-label ps-0 pb-0 mb-1"},"Text:",-1),St=["onUpdate:modelValue"],wt={class:"col-md-1 col-sm-1"},Ct=t("br",null,null,-1),It={class:"col-md-7 col-sm-11"},$t=["src"],Dt={props:{filePath:String,LabelFileId:Number,activityId:Number,ImageWidth:Number},data(){return{imageCoordinates:()=>document.getElementById("image").getBoundingClientRect(),imageX:null,imageY:null,imageWidth:300,imageHeight:null,imageSizeSaved:!1,labels:[]}},methods:{imageClick(i){console.log(i)},newLabel(){this.labels.push({labelId:null,name:"",shape:"",width:20,height:20,color:"#ffffff",text:"",textColor:"#000000",X:null,Y:null})},saveLabels(){let i=this.imageCoordinates(),e={ActivityId:this.activityId,Labels:this.labels.map(a=>({Name:a.name,Shape:a.shape,Width:a.width,Height:a.shape=="circle"?a.width:a.height,Color:a.color,TextColor:a.textColor,Text:a.text,X:a.X-i.left,Y:a.Y-i.top}))};m.put(window.location.origin+"/api/activity/labels",e).then(a=>{this.loadLabels()}).catch(a=>{console.log(a)})},saveImageSize(){m.put(window.location.origin+"/api/activity/label-file/image-width",{LabelFileId:this.LabelFileId,ImageWidth:this.imageWidth}).then(i=>{this.imageSizeSaved=!0}).catch(i=>console.log(i))},updateCoordinates(){let i=this.imageCoordinates();this.imageX=i.x,this.imageY=i.y,this.imageWidth=i.width,this.imageHeight=i.height},updateLabelCoordinates(i,e){this.labels[i].X=e.x,this.labels[i].Y=e.y},loadLabels(){let i=document.getElementById("image").offsetTop;console.log(i),m.post(window.location.origin+"/api/activity/labels",{ActivityId:this.activityId}).then(e=>{let a=this.imageCoordinates();console.log(i);let o=e.data.map(s=>({activityId:s.ActivityId,labelId:s.LabelId,name:s.Name,shape:s.Shape,width:s.Width,height:s.Height,color:s.Color,textColor:s.TextColor,text:s.Text,X:s.X+a.x,Y:s.Y+a.y}));this.labels=o,console.log(this.labels)}).catch(e=>{console.log(e)})}},mounted(){this.ImageWidth!=null&&(this.loadLabels(),this.imageWidth=this.ImageWidth,this.imageSizeSaved=!0)}},Lt=Object.assign(Dt,{__name:"LabelPlacement",setup(i){return(e,a)=>(l(),n(p,null,[t("div",x,[t("div",Y,[t("form",O,[t("div",W,[X,c(t("input",{class:"form-range",type:"range",min:"300",max:"900",disabled:e.imageSizeSaved,"onUpdate:modelValue":a[0]||(a[0]=o=>e.imageWidth=o),onChange:a[1]||(a[1]=o=>e.updateCoordinates())},null,40,z),[[r,e.imageWidth]])]),t("div",P,[e.imageSizeSaved?d("",!0):(l(),n("button",{key:0,class:"btn btn-success",type:"button",onClick:a[2]||(a[2]=o=>this.saveImageSize())},"Save Image Size")),e.imageSizeSaved?(l(),n("button",{key:1,class:"btn btn-warning",type:"button",onClick:a[3]||(a[3]=o=>e.imageSizeSaved=!1)},"Edit Image Size")):d("",!0)]),t("div",M,[H,t("button",{class:"btn btn-primary",type:"button",onClick:a[4]||(a[4]=o=>e.newLabel())},"Add a New Label")]),t("div",E,[this.labels.length>0?(l(),n("button",{key:0,class:"btn btn-success",type:"button",onClick:a[5]||(a[5]=o=>this.saveLabels())},"Save Labels")):d("",!0)]),this.labels.length>0?(l(),n("div",B,[t("div",R,[(l(!0),n(p,null,f(e.labels,o=>(l(),n("div",q,[t("div",j,[t("div",Q,[c(t("input",{class:"form-control",type:"text",placeholder:"Name","onUpdate:modelValue":s=>o.name=s},null,8,G),[[r,o.name]])]),t("div",J,[t("div",K,[Z,c(t("select",{class:"form-select","onUpdate:modelValue":s=>o.shape=s},ot,8,tt),[[S,o.shape]])]),o.shape!==""?(l(),n("div",st,[t("div",lt,[nt,c(t("input",{class:"form-range",type:"range",min:"20",max:"150","onUpdate:modelValue":s=>o.width=s},null,8,dt),[[r,o.width]])]),o.shape=="rectangle"?(l(),n("div",ct,[rt,c(t("input",{class:"form-range",type:"range",min:"20",max:"150","onUpdate:modelValue":s=>o.height=s},null,8,ht),[[r,o.height]])])):d("",!0)])):d("",!0),t("div",pt,[mt,t("div",ut,[c(t("input",{class:"form-control form-control-color",type:"color",title:"Choose your color","onUpdate:modelValue":s=>o.color=s},null,8,vt),[[r,o.color]])]),gt,t("div",bt,[c(t("input",{class:"form-control form-control-color",type:"color",title:"Choose your text color","onUpdate:modelValue":s=>o.textColor=s},null,8,yt),[[r,o.textColor]])])]),t("div",ft,[_t,c(t("input",{class:"form-control",type:"text","onUpdate:modelValue":s=>o.text=s},null,8,St),[[r,o.text]])])])])]))),256))])])):d("",!0)])]),t("div",wt,[(l(!0),n(p,null,f(e.labels,(o,s)=>(l(),n(p,null,[b(U,{onChangeCoordinates:h=>this.updateLabelCoordinates(s,h),Shape:o.shape,Color:o.color,TextColor:o.textColor,Text:o.text,Width:o.width,Height:o.height,LabelX:o.X,LabelY:o.Y},null,8,["onChangeCoordinates","Shape","Color","TextColor","Text","Width","Height","LabelX","LabelY"]),Ct],64))),256))]),t("div",It,[t("img",{src:i.filePath,style:g({width:e.imageWidth+"px"}),id:"image",onClick:a[6]||(a[6]=(...o)=>e.imageClick&&e.imageClick(...o)),ref:"image"},null,12,$t)])]),t("p",null,y(e.labels),1)],64))}}),Vt=t("h3",null,"Create Activity ",-1),kt={class:"accordion",id:"createActivitySteps"},Tt={class:"accordion-item"},Ft=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseActivityInformation","aria-expanded":"true","aria-controls":"collapseActivityInformation"},"Step 1: Activity Information")],-1),Nt={class:"accordion-collapse collapse",id:"collapseActivityInformation","data-bs-parent":"#createActivitySteps"},At={class:"accordion-body"},Ut={class:"row g-3 mb-3"},xt={class:"col-md-9 pe-5"},Yt=t("label",{class:"form-label",for:"activityName"},"Activity Name ",-1),Ot=["disabled","on-change"],Wt={key:0,class:"invalid-feedback"},Xt={class:"col-md-3"},zt=t("label",{class:"form-label",for:"activityType"},"Activity Type ",-1),Pt=["disabled","on-change"],Mt=w('<option value="">Select a type</option><option value="Label">Label </option><option value="MultipleChoice">Multiple Choice </option><option value="Matching">Matching </option><option value="TrueFalse">True/False </option><option value="Quiz">Quiz</option>',6),Ht=[Mt],Et={key:0,class:"invalid-feedback"},Bt={class:"col-md-6"},Rt=t("label",{class:"form-label",for:"activityDescription"},"Description ",-1),qt=["disabled","on-change"],jt={key:0,class:"invalid-feedback"},Qt={class:"col-md-6"},Gt=t("label",{class:"form-label",for:"activityInstructions"},"Instructions",-1),Jt=["disabled","on-change"],Kt={key:0,class:"invalid-feedback"},Zt={class:"accordion-item"},te=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseLabelFileUpload","aria-expanded":"true","aria-controls":"collapseLabelFileUpload"},"Step 2: Image Upload")],-1),ee={class:"accordion-collapse collapse",id:"collapseLabelFileUpload","data-bs-parent":"#createActivitySteps"},ie={class:"accordion-body"},ae={key:0,class:"accordion-item"},oe=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseLabelPlacement","aria-expanded":"true","aria-controls":"collapseLabelPlacement"},"Step 3: Label Placement ")],-1),se={class:"accordion-collapse collapse show",id:"collapseLabelPlacement","data-bs-parent":"#createActivitySteps"},le={class:"accordion-body"},ne={data(){return{activityData:{ActivityId:this.$route.params.id,Name:"",Type:"",Description:"",Instructions:""},validation:{FormValid:void 0,Name:void 0,Type:void 0,Description:void 0,Instructions:!0},stepOneSaved:this.$route.params.id!=-1,stepOneChanged:!1,showValidation:!1,imageUploaded:!1}},methods:{getStepOneValidation(i){return{"is-valid":i===void 0?!1:this.showValidation&&i,"is-invalid":i===void 0?!1:this.showValidation&&!i}},validateStepOneForm(){let i=!0;this.activityData.Name==""&&(i=!1),this.validation.Name=i;let e=!0;this.activityData.Type==""&&(e=!1),this.validation.Type=e;let a=!0;this.activityData.Description==""&&(a=!1),this.validation.Description=a,this.validation.FormValid=i&&e&&a},saveStepOneData(){this.validateStepOneForm(),this.showValidation=!0,console.log(this.validation.FormValid),this.validation.FormValid&&m.put(window.location.origin+"/api/activity",this.activityData).then(i=>{i.status===200&&(this.$router.push({name:"Manage Activity",params:{id:i.data.activityId}}),this.activityData.ActivityId=i.data.activityId,this.stepOneSaved=!0)}).catch(i=>console.log(i))},loadActivity(){m.post(window.location.origin+"/api/activity",{activityId:this.$route.params.id}).then(i=>{i.status===200&&(this.stepOneSaved=!0,this.activityData=i.data)})}},created(){this.$route.params.id!=-1&&this.loadActivity()}},ce=Object.assign(ne,{__name:"ManageActivity",setup(i){return(e,a)=>(l(),n(p,null,[Vt,t("div",kt,[t("div",Tt,[Ft,t("div",Nt,[t("div",At,[t("form",Ut,[t("div",xt,[Yt,c(t("input",{class:v(["form-control",e.getStepOneValidation(this.validation.Name)]),disabled:e.stepOneSaved,"on-change":e.validateStepOneForm(),type:"text",id:"activityName",placeholder:"Name","onUpdate:modelValue":a[0]||(a[0]=o=>e.activityData.Name=o)},null,42,Ot),[[r,e.activityData.Name]]),e.showValidation&&!this.validation.Name?(l(),n("div",Wt,"Name is required")):d("",!0)]),t("div",Xt,[zt,c(t("select",{class:v(["form-select",e.getStepOneValidation(this.validation.Type)]),disabled:e.stepOneSaved,"on-change":e.validateStepOneForm(),"onUpdate:modelValue":a[1]||(a[1]=o=>e.activityData.Type=o),id:"activityType"},Ht,42,Pt),[[S,e.activityData.Type]]),e.showValidation&&!this.validation.Name?(l(),n("div",Et,"Type is required")):d("",!0)]),t("div",Bt,[Rt,c(t("textarea",{class:v(["form-control",e.getStepOneValidation(this.validation.Description)]),disabled:e.stepOneSaved,"on-change":e.validateStepOneForm(),id:"activityDescription","onUpdate:modelValue":a[2]||(a[2]=o=>e.activityData.Description=o),placeholder:"Description is limited to 150 characters."},null,42,qt),[[r,e.activityData.Description]]),e.showValidation&&!this.validation.Name?(l(),n("div",jt,"Description is required")):d("",!0)]),t("div",Qt,[Gt,c(t("textarea",{class:v(["form-control",e.getStepOneValidation(this.validation.Instructions)]),disabled:e.stepOneSaved,"on-change":e.validateStepOneForm(),id:"activityInstructions","onUpdate:modelValue":a[3]||(a[3]=o=>e.activityData.Instructions=o),placeholder:"Instructions are limited to 150 characters."},null,42,Jt),[[r,e.activityData.Instructions]]),e.showValidation&&!this.validation.Name?(l(),n("div",Kt,"Instructions is required")):d("",!0)])]),e.stepOneSaved?d("",!0):(l(),n("button",{key:0,class:"btn btn-success",onClick:a[4]||(a[4]=o=>e.saveStepOneData())},"Save")),e.stepOneSaved?(l(),n("button",{key:1,class:"btn btn-warning",onClick:a[5]||(a[5]=o=>e.stepOneSaved=!1)},"Edit")):d("",!0)])])]),this.activityData.Type==="Label"?(l(),n(p,{key:0},[t("div",Zt,[te,t("div",ee,[t("div",ie,[b(T,{activityId:this.activityData.ActivityId,loadActivity:e.loadActivity},null,8,["activityId","loadActivity"])])])]),this.activityData.files&&this.activityData.files.length>0?(l(),n("div",ae,[oe,t("div",se,[t("div",le,[b(Lt,{activityId:this.activityData.ActivityId,filePath:this.activityData.files[0].FilePath,ImageWidth:this.activityData.files[0].ImageWidth,LabelFileId:this.activityData.files[0].LabelFileId},null,8,["activityId","filePath","ImageWidth","LabelFileId"])])])])):d("",!0)],64)):d("",!0)]),t("p",null,y(this.activityData),1)],64))}});export{ce as default};
